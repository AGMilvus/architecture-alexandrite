# Мотивация
Участились жалобы от операторов: когда они заходят на первую страницу MES, система долго прогружается. На первой странице отображается список заказов в работе по статусам — это дашборд с фильтром.
Для преодоления сложившейся ситуации следует применить кэширование запросов.
Добавление кэширования позволит:
- Ускорить доступ
- Повысить производительность
- Уменьшить время отклика
- Уменьшить нагрузку на БД
- Снизить излишний трафик

# Предлагаемое решение
Для операторов критически важно видеть список свежих заказов не в работе (это заказы в статусе `MANUFACTURING_APPROVED`).
Это накладывает ограничения на возможные варианты реализации кэширования:
- Несогласованность данных в кеше с базой данных недопустима.
- Модель данных в кэше отличается от модели данных в базе.

- **Клиентский кэш** - Не подходит (Недопустимо получить устаревшие данные).
- **Write-Through** и **Write-Behind** не подходят, поскольку требуется оптимизация запросов чтения.
- **Cache-Aside** - Не подходит из-за возможной несогласованности данных в кеше с базой данных.
- **Read-Through** -  Не подходит (Модель данных в кеше должна быть идентична модели базы данных).

Подойдет паттерн **Refresh-ahead** поскольку обеспечивается низкая стоимость чтения данных из БД и согласованность записей кеша.

Для кэша необходимо реализовать программную инвалидацию, по событиям изменения статуса заказа:
- Переход заказа в статус `MANUFACTURING_APPROVED`.
- Переход заказа из статуса `MANUFACTURING_APPROVED`.

[Sequence diagram](./CacheSequence.puml)